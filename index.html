<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Data-visualisation-playground by nehiljain</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Data-visualisation-playground</h1>
        <p>Different projects to learn data visualisation using ggplot2 and D3. </p>

        <p class="view"><a href="https://github.com/nehiljain/data-visualisation-playground">View the Project on GitHub <small>nehiljain/data-visualisation-playground</small></a></p>


        <ul>
          <li><a href="https://github.com/nehiljain/data-visualisation-playground/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/nehiljain/data-visualisation-playground/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/nehiljain/data-visualisation-playground">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>

<h1 id="treemap-explained">TreeMap explained</h1>

<h2 id="introduction">Introduction</h2>

<p>I have been developing my know how in data analysis more so in data visualization specifically. This is my first attempt to help those beginning out there with D3 or R to understand how they can display there hierarchical data. The end result of the post will be <strong>image</strong> from R and <strong>demo</strong> from D3 js. I am assuming that the reader is familiar with what is R and what is D3. If not you can refer to <strong>ref1</strong> and <strong>ref2</strong> respectively. </p>

<p>I have watched the video lectures on Visualization in the <strong>Introduction to Data Science course at Coursera</strong>. I am in the process of working on the Data Visualisation course by <strong>Harward dedicated specifically to D3 and Data Visualization</strong>. To get quickly started with <strong>D3 scottâ€™s book</strong> is amazing.</p>

<h2 id="data">Data</h2>

<p>The data that I am going to visualize looks like this.</p>

<p><strong>post data head here</strong></p>

<p>This data is hypothetical data of performance genes in humans. The root is performance which can depend of higher level categories like endurance, recovery, power etc. These categories are combination of different traits like muscle fatigue, heart capacity, propensity to exercise etc. These traits are effected by some genes of the person. These genes can have different states based on the DNA of the person. These states are low, mid, high or (1,2,3). The treemap we are going to make will show a overall picture of the genetic performance of the person.</p>

<h2 id="data-visualization">Data Visualization</h2>

<p>The mapping of the variables in the data to the visual attributes is shown below. This is designed by me, which means that there might be better ways to attack this problem. Please write your feedback in the comments.</p>

<h2 id="r-code">R Code</h2>

<h3 id="limitation">Limitation</h3>

<p>There are two color mappings. Category(Nominal) is mapped to Color Hue. Gene value is mapped to Color Value.</p>

<hr>

<h2 id="d3-code">D3 Code</h2>

<pre><code>var w = 900 - 80,
    h = 700 - 180,
    x = d3.scale.linear().range([0, w]),
    y = d3.scale.linear().range([0, h]),
    root,
    node;
</code></pre>

<p>This is setup of the canvas and the global variables. <strong>root</strong> is used to hold the data. A treemap is a visualization which optimizes the arrangement and the sizes of different tiles within it based on the available space. The x and y above are scaling functions which map the input based on the width and height of the canvas created. </p>

<pre><code>var color = d3.scale.ordinal()
  .domain([1,2,3])
  .range(colorbrewer.YlOrRd[3]);
</code></pre>

<p>This is a function to create an ordinal scale which map 1,2,3 values to  <br>
3 color values of the colorbrewer sequence palette - <strong>YlOrRd</strong>. You can view all the palettes available <a href="http://bl.ocks.org/mbostock/5577023">here</a>. </p>

<pre><code>var treemap = d3.layout.treemap()
                .round(true)
                .size([w, h])
                .sticky(true)
                .value(function (d) {
                    return d.size;
                });
</code></pre>

<p>All the functions above should be read in detail in the documentation. The overview is that here, we create a new default treemap layout. This layout will round the dimensions to exact pixel boundaries. </p>

<pre><code>var diagonal = d3.svg.diagonal()
    .projection(function (d) {
    return [d.y, d.x];
});
</code></pre>

<p>The diagonal is a path generator function which returns a path between source and target points.</p>

<pre><code>var svg = d3.select(".viz").append("svg")
    .attr("width", width + margin.right + margin.left)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")" );
</code></pre>

<p>Here we setup the svg element in the dom by selecting the .viz element and adding a svg with height and width. Then it appends a g element which is used to group svg elements. </p>

<pre><code>root = geneticData; //assigning the section of the data to start the tree with.
root.x0 = height / 2;
root.y0 = 0;

function collapse(d) {
  if (d.children) {
    d._children = d.children;
    d._children.forEach(collapse);
    d.children = null;
  }
}
root.children.forEach(collapse);
</code></pre>

<p>Now we attach the data with to the root element and set the x,y positions of the root node. Further, collapse the nodes with children. </p>

<hr>

<blockquote>
  <p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p>
</blockquote>


      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/nehiljain">nehiljain</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>